{
  "metadata": {
    "name": "hipoteca_simulacion_slots_v1",
    "version": "1.0",
    "description": "Slots necesarios para simulacion de hipoteca (cliente banco / no cliente)."
  },
  "slots": [
    {
      "name": "cliente_es_cliente_banco",
      "type": "boolean",
      "prompt": "Pregúntale al cliente si es cliente del banco",
      "required": true,
      "validation": "is_bool"
    },
    {
      "name": "nombre_completo",
      "type": "string",
      "prompt": "¿Me puedes decir tu nombre completo (nombre y apellidos)?",
      "required": true,
      "pre_fill_if_client_data": "full_name",
      "validation": "min_length:3"
    },
    {
      "name": "dni_nie",
      "type": "string",
      "prompt": "¿Me puedes decir tu DNI / NIE incluyendo la letra final?",
      "required": true,
      "pre_fill_if_client_data": "dni",
      "validation": "dni_format"
    },
    {
      "name": "fecha_nacimiento",
      "type": "date",
      "prompt": "Necesitaré también tu fecha de nacimiento (DD/MM/YYYY), por favor",
      "required": true,
      "pre_fill_if_client_data": "birth_date",
      "validation": "adult_min_age:18"
    },
    {
      "name": "telefono",
      "type": "contact",
      "prompt": "¿Cuál es tu número de teléfono móvil?",
      "required": true,
      "pre_fill_if_client_data": "contact",
      "validation": "phone_or_email"
    },
        {
      "name": "email",
      "type": "contact",
      "prompt": "¿Cuál es tu email?",
      "required": true,
      "pre_fill_if_client_data": "contact",
      "validation": "phone_or_email"
    },
    {
      "name": "precio_vivienda",
      "type": "number",
      "prompt": "¿cuánto vale la vivienda que se quiere comprar con esta hipoteca?",
      "required": true,
      "validation": "positive_number"
    },
    {
      "name": "entrada",
      "type": "number",
      "prompt": "cuando se compra una vivienda se suele dar una cantidad de dinero por adelantado. Es cantidad la tiene que tener el cliente, no la presta el banco. Normalmente es el 20% del importe total de compra de la vivienda. Pregúntale al cliente cuánto va a aportar él de su bolsillo.",
      "required": true,
      "validation": "non_negative_and_less_than_price"
    },
    {
      "name": "importe_a_financiar",
      "type": "number",
      "prompt": "¿qué cantidad de dinero o importe quiere financiar?",
      "required": false,
      "auto_compute": "precio_vivienda - entrada",
      "validation": "positive_number"
    },
    {
      "name": "ingresos_netos_mensuales",
      "type": "number",
      "prompt": "¿Cuáles son tus ingresos brutos mensuales en euros en 12 pagas?",
      "required": false,
      "pre_fill_if_client_data": "domiciled_payroll",
      "validation": "non_negative"
    },
    {
      "name": "gastos_mensuales_est",
      "type": "number",
      "prompt": "¿Cuáles son tus gastos mensuales estimados (otros créditos como el de coche o al consumo, tarjetas de crédito, alquileres...)?",
      "required": false,
      "validation": "non_negative"
    }
  ],
  "flows": {
    "default": {
      "steps": [
        "cliente_es_cliente_banco",
        "pre_fill_client_data_if_any",
        "confirm_pre_filled_items",
        "collect_missing_slots_in_order",
        "validate_slots",
        "request_consent_for_credit_checks",
        "invoke_credit_checks_and_kcy",
        "compute_simulation",
        "show_results_and_options"
      ]
    }
  }
}
